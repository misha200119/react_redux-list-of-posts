(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{24:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var s=n(10),c=n.n(s),r=n(8),a=n(1),o=n.n(a),i=n(6),u=n(4),l=n(3),d=n(9),m=n(2),j=n.n(m),p=(n(24),n(0)),b=function(){return Object(p.jsx)("div",{className:"Loader",children:Object(p.jsx)("div",{className:"Loader__content"})})},f=function(){return Object(r.b)()},h=r.c,O=n(15),x=n(5),v="https://mate.academy/students-api",P=function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v).concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status,"| ").concat(n.text));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v).concat(t),{method:"POST",body:n,headers:{"Content-Type":"application/json"}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v).concat(t),{method:"DELETE"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P("/posts"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P("/posts?userId=".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P("/posts/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P("/comments?postId=".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("/comments",JSON.stringify(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w("/comments/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=Object(x.b)("PostDetailsState/fetchUserPostsById",function(){var e=Object(l.a)(j.a.mark((function e(t,n){var s,c,r,a,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=n.dispatch)(B(null)),e.next=4,Promise.all([g(t),I(t)]);case 4:c=e.sent,r=Object(d.a)(c,2),a=r[0],o=r[1],s(B(a)),s(U(o));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),k=Object(x.b)("PostDetailsState/removeCommentInSelectedPostById",function(){var e=Object(l.a)(j.a.mark((function e(t,n){var s,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.dispatch,c=n.getState(),r=c.postDetails.commentsForSelectedPost.filter((function(e){return e.id!==t})),s(A(!0)),e.next=6,C(t);case 6:s(U(r)),s(A(!1));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),L=Object(x.b)("PostDetailsState/addCommentInSelectedPost",function(){var e=Object(l.a)(j.a.mark((function e(t,n){var s,c,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.dispatch,c=n.getState(),r=c.postDetails.commentsForSelectedPost,a=[].concat(Object(O.a)(r),[Object(u.a)(Object(u.a)({},t),{},{id:r.length+1})]),s(A(!0)),e.next=7,S(t);case 7:s(U(a)),s(A(!1));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),F=Object(x.c)({name:"listOfPosts",initialState:{selectedPostDetails:null,commentsForSelectedPost:[],someCommentIsDeleting:!1,commentsIsShowing:!0},reducers:{setSelectedPostDetails:function(e,t){e.selectedPostDetails=t.payload},setCommentsForSelectedPost:function(e,t){e.commentsForSelectedPost=t.payload},setSomeCommentIsDeleting:function(e,t){e.someCommentIsDeleting=t.payload},setCommentsIsShowing:function(e,t){e.commentsIsShowing=t.payload}},extraReducers:function(e){e.addCase(D.fulfilled,(function(){}))}}),E=F.actions,B=E.setSelectedPostDetails,U=E.setCommentsForSelectedPost,A=E.setSomeCommentIsDeleting,R=E.setCommentsIsShowing,T=function(e){return e.postDetails.selectedPostDetails},G=function(e){return e.postDetails.commentsForSelectedPost},J=function(e){return e.postDetails.someCommentIsDeleting},H=function(e){return e.postDetails.commentsIsShowing},Y=F.reducer,K=(n(26),function(e){var t=e.selectedPostId,n=f(),s=h(J),c={postId:t,name:"",email:"",body:""},r={name:"",email:"",body:""},o=Object(a.useState)(c),m=Object(d.a)(o,2),O=m[0],x=m[1],v=Object(a.useState)(r),P=Object(d.a)(v,2),y=P[0],w=P[1],_=Object(a.useCallback)(function(){var e=Object(l.a)(j.a.mark((function e(n){var s,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=n.target,c=s.value,r=s.name,x((function(e){var n;return Object(u.a)(Object(u.a)({},e),{},(n={},Object(i.a)(n,r,c),Object(i.a)(n,"postId",t),n))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,O]),N=Object(a.useCallback)(function(){var e=Object(l.a)(j.a.mark((function e(t){var s,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),w(Object(u.a)({},r)),O.name.trim()||w((function(e){return Object(u.a)(Object(u.a)({},e),{},{name:"Enter title!"})})),O.body.trim()||w((function(e){return Object(u.a)(Object(u.a)({},e),{},{body:"Enter comment!"})})),O.email.trim()||w((function(e){return Object(u.a)(Object(u.a)({},e),{},{email:"Enter email!"})})),s=Object.values(O).every((function(e){return String(e).trim()})),a=Object.values(y).some((function(e){return e})),s&&!a&&(n(L(O)),x(c));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[O,y]);return Object(p.jsx)(p.Fragment,{children:s?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Updating data"}),Object(p.jsx)(b,{})]}):Object(p.jsxs)("form",{className:"NewCommentForm",onSubmit:N,children:[Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",onChange:_,value:O.name}),y.name&&Object(p.jsx)("p",{className:"error-message",children:y.name})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("input",{type:"email",name:"email",placeholder:"Your email",className:"NewCommentForm__input",onChange:_,value:O.email}),y.email&&Object(p.jsx)("p",{className:"error-message",children:y.email})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",onChange:_,value:O.body}),y.body&&Object(p.jsx)("p",{className:"error-message",children:y.body})]}),Object(p.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})})}),M=(n(27),Object(a.memo)((function(e){var t=e.selectedPostId,n=f(),s=h(T),c=h(G),r=h(H),o=h(J);return Object(a.useEffect)((function(){n(D(t))}),[t]),Object(p.jsxs)(p.Fragment,{children:[s&&Object(p.jsxs)("div",{className:"PostDetails",children:[Object(p.jsx)("h2",{children:"Post details:"}),Object(p.jsx)("section",{className:"PostDetails__post",children:Object(p.jsx)("p",{children:null===s||void 0===s?void 0:s.body})}),Object(p.jsxs)("section",{className:"PostDetails__comments",children:[Object(p.jsx)("button",{type:"button",className:"button",onClick:function(){n(R(!r))},children:"".concat(r?"Hide":"Show"," ").concat(c.length," comments")}),r&&c.length>0&&Object(p.jsx)("ul",{className:"PostDetails__list",children:c.map((function(e){return Object(p.jsxs)("li",{className:"PostDetails__list-item",children:[Object(p.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){n(k(e.id))},children:o?Object(p.jsx)(b,{}):"X"}),Object(p.jsx)("p",{children:e.body})]},e.id)}))})]}),Object(p.jsx)("section",{children:Object(p.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(p.jsx)(K,{selectedPostId:t})})})]}),!s&&Object(p.jsx)(b,{})]})}))),V=Object(x.b)("listOfPosts/fetchUserPostsById",function(){var e=Object(l.a)(j.a.mark((function e(t,n){var s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=n.dispatch)(Q(!0)),0!==t){e.next=8;break}return e.next=5,_();case 5:c=e.sent,e.next=11;break;case 8:return e.next=10,N(t);case 10:c=e.sent;case 11:return s(Q(!1)),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),W=Object(x.c)({name:"listOfPosts",initialState:{selectedPostId:0,posts:null,isPostListLoading:!1,filterByUserId:0},reducers:{setSelectedPostId:function(e,t){e.selectedPostId=t.payload},setFilterByUserId:function(e,t){e.filterByUserId=t.payload},setIsPostListLoading:function(e,t){e.isPostListLoading=t.payload}},extraReducers:function(e){e.addCase(V.fulfilled,(function(e,t){e.posts=t.payload}))}}),X=W.actions,q=X.setSelectedPostId,z=X.setFilterByUserId,Q=X.setIsPostListLoading,Z=function(e){return e.listOfPosts.posts},$=function(e){return e.listOfPosts.selectedPostId},ee=function(e){return e.listOfPosts.isPostListLoading},te=function(e){return e.listOfPosts.filterByUserId},ne=W.reducer,se=(n(28),o.a.memo((function(){var e=f();Object(a.useEffect)((function(){e(V(0))}),[]);var t=h(Z),n=h(ee),s=h(te),c=h($),r=Object(a.useCallback)((function(t){e(q(c!==t?t:0))}),[c]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("header",{className:"PostsList__filter-props-block",children:Object(p.jsxs)("label",{children:["Select a user: \xa0",Object(p.jsxs)("select",{className:"App__user-selector",value:s,onChange:function(t){var n=t.target;e(V(+n.value)),e(z(+n.value))},children:[Object(p.jsx)("option",{value:"0",children:"All users"}),Object(p.jsx)("option",{value:"1",children:"Leanne Graham"}),Object(p.jsx)("option",{value:"2",children:"Ervin Howell"}),Object(p.jsx)("option",{value:"3",children:"Clementine Bauch"}),Object(p.jsx)("option",{value:"4",children:"Patricia Lebsack"}),Object(p.jsx)("option",{value:"5",children:"Chelsey Dietrich"}),Object(p.jsx)("option",{value:"6",children:"Mrs. Dennis Schulist"}),Object(p.jsx)("option",{value:"7",children:"Kurtis Weissnat"}),Object(p.jsx)("option",{value:"8",children:"Nicholas Runolfsdottir V"}),Object(p.jsx)("option",{value:"9",children:"Glenna Reichert"}),Object(p.jsx)("option",{value:"10",children:"Leanne Graham"})]})]})}),t?Object(p.jsxs)("div",{className:"PostsList",children:[Object(p.jsx)("h2",{children:"Posts:"}),Object(p.jsx)("ul",{className:"PostsList__list",children:t.map((function(e){return Object(p.jsxs)("li",{className:"PostsList__item",children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("b",{children:["[User #",e.userId,"]:"]}),e.title]}),Object(p.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){r(e.id)},children:c===e.id?"Close":"Open"})]},e.id)}))})]}):Object(p.jsx)("h2",{children:"No one posts is avalible"}),n&&Object(p.jsx)(b,{})]})}))),ce=(n(29),n(30),function(){var e=h($);return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)("main",{className:"App__main",children:[Object(p.jsx)("div",{className:"App__sidebar",children:Object(p.jsx)(se,{})}),!!e&&Object(p.jsx)("div",{className:"App__content",children:Object(p.jsx)(M,{selectedPostId:e})})]})})}),re=Object(x.a)({reducer:{listOfPosts:ne,postDetails:Y}}),ae=function(){return Object(p.jsx)(r.a,{store:re,children:Object(p.jsx)(ce,{})})};c.a.render(Object(p.jsx)(ae,{}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.0a258084.chunk.js.map
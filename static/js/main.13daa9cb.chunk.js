(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{24:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){"use strict";n.r(e);var s=n(10),c=n.n(s),r=n(8),a=n(1),o=n.n(a),i=n(6),u=n(4),l=n(3),d=n(9),j=n(2),m=n.n(j),p=(n(24),n(0)),b=function(){return Object(p.jsx)("div",{className:"Loader",children:Object(p.jsx)("div",{className:"Loader__content"})})},f=function(){return Object(r.b)()},h=r.c,O=n(15),x=n(5),v="https://mate.academy/students-api",P=function(){var t=Object(l.a)(m.a.mark((function t(e){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(v).concat(e));case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("".concat(n.status,"| ").concat(n.text));case 5:return t.abrupt("return",n.json());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(l.a)(m.a.mark((function t(e,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(v).concat(e),{method:"POST",body:n,headers:{"Content-Type":"application/json"}});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),w=function(){var t=Object(l.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(v).concat(e),{method:"DELETE"});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(l.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",P("/posts"));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(l.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",P("/posts?userId=".concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=Object(l.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",P("/posts/".concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=Object(l.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w("/posts/".concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=Object(l.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",P("/comments?postId=".concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(l.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",y("/comments",JSON.stringify(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(l.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w("/comments/".concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=Object(x.b)("PostDetailsState/fetchUserPostsById",function(){var t=Object(l.a)(m.a.mark((function t(e,n){var s,c,r,a,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(s=n.dispatch)(U(null)),t.next=4,Promise.all([N(e),S(e)]);case 4:c=t.sent,r=Object(d.a)(c,2),a=r[0],o=r[1],s(U(a)),s(A(o));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),L=Object(x.b)("PostDetailsState/removeCommentInSelectedPostById",function(){var t=Object(l.a)(m.a.mark((function t(e,n){var s,c,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.dispatch,c=n.getState(),r=c.postDetails.commentsForSelectedPost.filter((function(t){return t.id!==e})),s(R(!0)),t.next=6,k(e);case 6:s(A(r)),s(R(!1));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),F=Object(x.b)("PostDetailsState/addCommentInSelectedPost",function(){var t=Object(l.a)(m.a.mark((function t(e,n){var s,c,r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.dispatch,c=n.getState(),r=c.postDetails.commentsForSelectedPost,a=[].concat(Object(O.a)(r),[Object(u.a)(Object(u.a)({},e),{},{id:r.length+1})]),s(R(!0)),t.next=7,C(e);case 7:s(A(a)),s(R(!1));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),B=Object(x.c)({name:"listOfPosts",initialState:{selectedPostDetails:null,commentsForSelectedPost:[],someCommentIsDeleting:!1,commentsIsShowing:!0},reducers:{setSelectedPostDetails:function(t,e){t.selectedPostDetails=e.payload},setCommentsForSelectedPost:function(t,e){t.commentsForSelectedPost=e.payload},setSomeCommentIsDeleting:function(t,e){t.someCommentIsDeleting=e.payload},setCommentsIsShowing:function(t,e){t.commentsIsShowing=e.payload}},extraReducers:function(t){t.addCase(D.fulfilled,(function(){}))}}),E=B.actions,U=E.setSelectedPostDetails,A=E.setCommentsForSelectedPost,R=E.setSomeCommentIsDeleting,T=E.setCommentsIsShowing,G=function(t){return t.postDetails.selectedPostDetails},J=function(t){return t.postDetails.commentsForSelectedPost},H=function(t){return t.postDetails.someCommentIsDeleting},X=function(t){return t.postDetails.commentsIsShowing},Y=B.reducer,K=(n(26),function(t){var e=t.selectedPostId,n=f(),s=h(H),c={postId:e,name:"",email:"",body:""},r={name:"",email:"",body:""},o=Object(a.useState)(c),j=Object(d.a)(o,2),O=j[0],x=j[1],v=Object(a.useState)(r),P=Object(d.a)(v,2),y=P[0],w=P[1],_=Object(a.useCallback)(function(){var t=Object(l.a)(m.a.mark((function t(n){var s,c,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=n.target,c=s.value,r=s.name,x((function(t){var n;return Object(u.a)(Object(u.a)({},t),{},(n={},Object(i.a)(n,r,c),Object(i.a)(n,"postId",e),n))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,O]),g=Object(a.useCallback)(function(){var t=Object(l.a)(m.a.mark((function t(e){var s,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),w(Object(u.a)({},r)),O.name.trim()||w((function(t){return Object(u.a)(Object(u.a)({},t),{},{name:"Enter title!"})})),O.body.trim()||w((function(t){return Object(u.a)(Object(u.a)({},t),{},{body:"Enter comment!"})})),O.email.trim()||w((function(t){return Object(u.a)(Object(u.a)({},t),{},{email:"Enter email!"})})),s=Object.values(O).every((function(t){return String(t).trim()})),a=Object.values(y).some((function(t){return t})),s&&!a&&(n(F(O)),x(c));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[O,y]);return Object(p.jsx)(p.Fragment,{children:s?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Updating data"}),Object(p.jsx)(b,{})]}):Object(p.jsxs)("form",{className:"NewCommentForm",onSubmit:g,children:[Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",onChange:_,value:O.name}),y.name&&Object(p.jsx)("p",{className:"error-message",children:y.name})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("input",{type:"email",name:"email",placeholder:"Your email",className:"NewCommentForm__input",onChange:_,value:O.email}),y.email&&Object(p.jsx)("p",{className:"error-message",children:y.email})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",onChange:_,value:O.body}),y.body&&Object(p.jsx)("p",{className:"error-message",children:y.body})]}),Object(p.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})})}),M=(n(27),Object(a.memo)((function(t){var e=t.selectedPostId,n=f(),s=h(G),c=h(J),r=h(X),o=h(H);return Object(a.useEffect)((function(){n(D(e))}),[e]),Object(p.jsxs)(p.Fragment,{children:[s&&Object(p.jsxs)("div",{className:"PostDetails",children:[Object(p.jsx)("h2",{children:"Post details:"}),Object(p.jsx)("section",{className:"PostDetails__post",children:Object(p.jsx)("p",{children:null===s||void 0===s?void 0:s.body})}),Object(p.jsxs)("section",{className:"PostDetails__comments",children:[Object(p.jsx)("button",{type:"button",className:"button",onClick:function(){n(T(!r))},children:"".concat(r?"Hide":"Show"," ").concat(c.length," comments")}),r&&c.length>0&&Object(p.jsx)("ul",{className:"PostDetails__list",children:c.map((function(t){return Object(p.jsxs)("li",{className:"PostDetails__list-item",children:[Object(p.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){n(L(t.id))},children:o?Object(p.jsx)(b,{}):"X"}),Object(p.jsx)("p",{children:t.body})]},t.id)}))})]}),Object(p.jsx)("section",{children:Object(p.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(p.jsx)(K,{selectedPostId:e})})})]}),!s&&Object(p.jsx)(b,{})]})}))),V=Object(x.b)("listOfPosts/deleteUserPostById",function(){var t=Object(l.a)(m.a.mark((function t(e,n){var s,c,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.dispatch,c=n.getState(),r=c.listOfPosts.posts.filter((function(t){return t.id!==e})),s($(!0)),t.next=6,I(e);case 6:s(tt(r)),s($(!1));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),W=Object(x.b)("listOfPosts/fetchUserPostsById",function(){var t=Object(l.a)(m.a.mark((function t(e,n){var s,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((s=n.dispatch)($(!0)),0!==e){t.next=8;break}return t.next=5,_();case 5:c=t.sent,t.next=11;break;case 8:return t.next=10,g(e);case 10:c=t.sent;case 11:return s($(!1)),t.abrupt("return",c);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),q=Object(x.c)({name:"listOfPosts",initialState:{selectedPostId:0,posts:[],isPostListLoading:!1,filterByUserId:0},reducers:{setPosts:function(t,e){t.posts=e.payload},setSelectedPostId:function(t,e){t.selectedPostId=e.payload},setFilterByUserId:function(t,e){t.filterByUserId=e.payload},setIsPostListLoading:function(t,e){t.isPostListLoading=e.payload}},extraReducers:function(t){t.addCase(W.fulfilled,(function(t,e){t.posts=e.payload}))}}),z=q.actions,Q=z.setSelectedPostId,Z=z.setFilterByUserId,$=z.setIsPostListLoading,tt=z.setPosts,et=function(t){return t.listOfPosts.posts},nt=function(t){return t.listOfPosts.selectedPostId},st=function(t){return t.listOfPosts.isPostListLoading},ct=function(t){return t.listOfPosts.filterByUserId},rt=q.reducer,at=(n(28),o.a.memo((function(){var t=f();Object(a.useEffect)((function(){t(W(0))}),[]);var e=h(et),n=h(st),s=h(ct),c=h(nt),r=Object(a.useCallback)((function(e){t(Q(c!==e?e:0))}),[c]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("header",{className:"PostsList__filter-props-block",children:Object(p.jsxs)("label",{children:["Select a user: \xa0",Object(p.jsxs)("select",{className:"App__user-selector",value:s,onChange:function(e){var n=e.target;t(W(+n.value)),t(Z(+n.value))},children:[Object(p.jsx)("option",{value:"0",children:"All users"}),Object(p.jsx)("option",{value:"1",children:"Leanne Graham"}),Object(p.jsx)("option",{value:"2",children:"Ervin Howell"}),Object(p.jsx)("option",{value:"3",children:"Clementine Bauch"}),Object(p.jsx)("option",{value:"4",children:"Patricia Lebsack"}),Object(p.jsx)("option",{value:"5",children:"Chelsey Dietrich"}),Object(p.jsx)("option",{value:"6",children:"Mrs. Dennis Schulist"}),Object(p.jsx)("option",{value:"7",children:"Kurtis Weissnat"}),Object(p.jsx)("option",{value:"8",children:"Nicholas Runolfsdottir V"}),Object(p.jsx)("option",{value:"9",children:"Glenna Reichert"}),Object(p.jsx)("option",{value:"10",children:"Leanne Graham"})]})]})}),n?Object(p.jsx)("h2",{children:"Loading"}):Object(p.jsxs)("div",{className:"PostsList",children:[Object(p.jsx)("h2",{children:"Posts:"}),Object(p.jsx)("ul",{className:"PostsList__list",children:e.map((function(e){return Object(p.jsxs)("li",{className:"PostsList__item",children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("b",{children:["[User #",e.userId,"]:"]}),e.title]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){r(e.id)},children:c===e.id?"Close":"Open"}),Object(p.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){t(V(e.id))},children:"X"})]})]},e.id)}))})]}),n&&Object(p.jsx)(b,{})]})}))),ot=(n(29),n(30),function(){var t=h(nt);return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)("main",{className:"App__main",children:[Object(p.jsx)("div",{className:"App__sidebar",children:Object(p.jsx)(at,{})}),!!t&&Object(p.jsx)("div",{className:"App__content",children:Object(p.jsx)(M,{selectedPostId:t})})]})})}),it=Object(x.a)({reducer:{listOfPosts:rt,postDetails:Y}}),ut=function(){return Object(p.jsx)(r.a,{store:it,children:Object(p.jsx)(ot,{})})};c.a.render(Object(p.jsx)(ut,{}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.13daa9cb.chunk.js.map